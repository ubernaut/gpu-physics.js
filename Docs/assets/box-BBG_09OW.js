import{W as y,V as a,P as h,G as v,O as R,c as b}from"./orbitControls-DtLyUrbL.js";import{B as E}from"./boxRenderer-DyEUWp37.js";async function I(){const i=document.getElementById("canvas");document.getElementById("error");const e=new y({maxBodies:32,maxParticles:512,radius:.08,stiffness:500,damping:.5,friction:.4,drag:.2,fixedTimeStep:1/60,gravity:new a(0,-1.5,0),boxSize:new a(10,10,10),gridPosition:new a(-10,0,-10),gridResolution:new a(64,32,64)});await e.ready();const s=new E(e.getDevice(),i),c=new h(e.getDevice()),g=new v(e.getDevice(),s.format,{size:20,height:0}),w=new R(i,{radius:12,target:[0,.5,0]}),t=3,l=e.radius*2.05,u=b(1,new a(e.radius*t,e.radius*t,e.radius*t)),p=e.addBody(0,1.5,0,0,0,0,1,1,u.x,u.y,u.z);for(let r=0;r<t;r++)for(let o=0;o<t;o++)for(let n=0;n<t;n++)if(r===0||r===t-1||o===0||o===t-1||n===0||n===t-1){const B=(r-(t-1)*.5)*l,P=(o-(t-1)*.5)*l,x=(n-(t-1)*.5)*l;e.addParticle(p,B,P,x)}const d={showParticles:!0,paused:!1},f=new window.lil.GUI({title:"Single Box"});f.add(d,"showParticles"),f.add(d,"paused"),e.step(e.fixedTimeStep||1/60);function m(){d.paused||e.step(1/60);const r=w.getViewProj(i.width/i.height);s.updateBindGroup(e.getBodyPositionBuffer(),e.getBodyQuaternionBuffer()),c.updateBindGroup(e.getParticleWorldPositionBuffer()),c.updateViewProj(r,e.radius),s.render(e.bodyCount,{viewProj:r,drawExtras:o=>{g.update(r,{gridSize:.5,lineWidth:.04,height:0}),g.record(o),d.showParticles&&c.record(o,e.particleCount)}}),requestAnimationFrame(m)}m()}I().catch(i=>{const e=document.getElementById("error");e.textContent=`Error: ${i.message||i}`,console.error(i)});
